!function(t,e){"use strict";function mkitem(t,e,n){var r={};return r[t.key]=e,t.pos&&(r[t.pos]=n),r}function unmountRedundant(t,e){for(var n,r=e.length,i=t.length;r>i;)n=e[--r],e.splice(r,1),n.unmount()}function moveNestedTags(t,e){Object.keys(t.tags).forEach(function(n){var r=t.tags[n];isArray(r)?each(r,function(t){moveChildTag(t,n,e)}):moveChildTag(r,n,e)})}function addVirtual(t,e,n){var r,i=t._root;for(t._virts=[];i;)r=i.nextSibling,n?e.insertBefore(i,n._root):e.appendChild(i),t._virts.push(i),i=r}function moveVirtual(t,e,n,r){for(var i,o=t._root,a=0;r>a;a++)i=o.nextSibling,e.insertBefore(o,n._root),o=i}function _each(t,e,n){remAttr(t,"each");var r,i=typeof getAttr(t,"no-reorder")!==l||remAttr(t,"no-reorder"),a=getTagName(t),u=o[a]||{tmpl:t.outerHTML},s=g.test(a),c=t.parentNode,f=document.createTextNode(""),p=getTag(t),d="option"===a.toLowerCase(),m=[],h=[],v="VIRTUAL"==t.tagName;n=b.loopKeys(n),c.insertBefore(f,t),e.one("before-mount",function(){t.parentNode.removeChild(t),c.stub&&(c=e.root)}).on("update",function(){var l=b(n.val,e),g=document.createDocumentFragment();isArray(l)||(r=l||!1,l=r?Object.keys(l).map(function(t){return mkitem(n,t,l[t])}):[]);for(var _=0,y=l.length;y>_;_++){var x=l[_],T=i&&x instanceof Object&&!r,w=h.indexOf(x),A=~w&&T?w:_,E=m[A];x=!r&&n.key?mkitem(n,x,_):x,!T&&!E||T&&!~w||!E?(E=new Tag(u,{parent:e,isLoop:!0,hasImpl:!!o[a],root:s?c:t.cloneNode(),item:x},t.innerHTML),E.mount(),v&&(E._root=E.root.firstChild),_!=m.length&&m[_]?(v?addVirtual(E,c,m[_]):c.insertBefore(E.root,m[_].root),h.splice(_,0,x)):v?addVirtual(E,g):g.appendChild(E.root),m.splice(_,0,E),A=_):E.update(x,!0),A!==_&&T&&m[_]&&(v?moveVirtual(E,c,m[_],t.childNodes.length):c.insertBefore(E.root,m[_].root),n.pos&&(E[n.pos]=_),m.splice(_,0,m.splice(A,1)[0]),h.splice(_,0,h.splice(A,1)[0]),!p&&E.tags&&moveNestedTags(E,_)),E._item=x,defineProperty(E,"_parent",e)}if(unmountRedundant(l,m),d){if(c.appendChild(g),c.length){var C,N=c.options;for(c.selectedIndex=C=-1,_=0;_<N.length;_++)(N[_].selected=N[_].__selected)&&0>C&&(c.selectedIndex=C=_)}}else c.insertBefore(g,f);p&&(e.tags[a]=m),h=l.slice()})}function parseNamedElements(t,e,n,r){walk(t,function(t){if(1==t.nodeType){if(t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||getAttr(t,"each")?1:0,n){var i=getTag(t);i&&!t.isLoop&&n.push(initChildTag(i,{root:t,parent:e},t.innerHTML,e))}t.isLoop&&!r||setNamed(t,e,[])}})}function parseExpressions(t,e,n){function addExpr(t,e,r){b.hasExpr(e)&&n.push(extend({dom:t,expr:e},r))}walk(t,function(t){var n,r=t.nodeType;return 3==r&&"STYLE"!=t.parentNode.tagName&&addExpr(t,t.nodeValue),1==r?(n=getAttr(t,"each"))?(_each(t,e,n),!1):(each(t.attributes,function(e){var n=e.name,r=n.split("__")[1];return addExpr(t,e.value,{attr:r||n,bool:r}),r?(remAttr(t,n),!1):void 0}),getTag(t)?!1:void 0):void 0})}function Tag(t,o,u){function updateOpts(){var t=h&&g?c:d||c;each(w.attributes,function(e){var n=e.value;f[toCamel(e.name)]=b.hasExpr(n)?b(n,t):n}),each(Object.keys(E),function(e){f[toCamel(e)]=b(E[e],t)})}function normalizeData(t){for(var e in v)typeof c[e]!==p&&isWritable(c,e)&&(c[e]=t[e])}function inheritFromParent(){c.parent&&g&&each(Object.keys(c.parent),function(t){var e=!contains(m,t)&&contains(C,t);(typeof c[t]===p||e)&&(e||C.push(t),c[t]=c.parent[t])})}function onChildUpdate(t){c.update(t,!0)}function toggle(t){if(each(T,function(e){e[t?"mount":"unmount"]()}),d){var e=t?"on":"off";g?d[e]("unmount",c.unmount):d[e]("update",onChildUpdate)[e]("unmount",c.unmount)}}var s,c=n.observable(this),f=inherit(o.opts)||{},d=o.parent,g=o.isLoop,h=o.hasImpl,v=cleanUpData(o.item),y=[],T=[],w=o.root,A=w.tagName.toLowerCase(),E={},C=[];t.name&&w._tag&&w._tag.unmount(!0),this.isMounted=!1,w.isLoop=g,w._tag=this,defineProperty(this,"_riot_id",++r),extend(this,{parent:d,root:w,opts:f,tags:{}},v),each(w.attributes,function(t){var e=t.value;b.hasExpr(e)&&(E[t.name]=e)}),s=_(t.tmpl,u),defineProperty(this,"update",function(t,e){return t=cleanUpData(t),inheritFromParent(),t&&isObject(v)&&(normalizeData(t),v=t),extend(c,t),updateOpts(),c.trigger("update",t),update(y,c),e&&c.parent?c.parent.one("updated",function(){c.trigger("updated")}):x(function(){c.trigger("updated")}),this}),defineProperty(this,"mixin",function(){return each(arguments,function(t){var e;t=typeof t===l?n.mixin(t):t,isFunction(t)?(e=new t,t=t.prototype):e=t,each(Object.getOwnPropertyNames(t),function(t){"init"!=t&&(c[t]=isFunction(e[t])?e[t].bind(c):e[t])}),e.init&&e.init.bind(c)()}),this}),defineProperty(this,"mount",function(){updateOpts();var e=n.mixin(a);if(e&&c.mixin(e),t.fn&&t.fn.call(c,f),parseExpressions(s,c,y),toggle(!0),t.attrs&&walkAttributes(t.attrs,function(t,e){setAttr(w,t,e)}),(t.attrs||h)&&parseExpressions(c.root,c,y),c.parent&&!g||c.update(v),c.trigger("before-mount"),g&&!h)w=s.firstChild;else{for(;s.firstChild;)w.appendChild(s.firstChild);w.stub&&(w=d.root)}defineProperty(c,"root",w),g&&parseNamedElements(c.root,c.parent,null,!0),!c.parent||c.parent.isMounted?(c.isMounted=!0,c.trigger("mount")):c.parent.one("mount",function(){isInStub(c.root)||(c.parent.isMounted=c.isMounted=!0,c.trigger("mount"))})}),defineProperty(this,"unmount",function(t){var n,r=w,o=r.parentNode,a=i.indexOf(c);if(c.trigger("before-unmount"),~a&&i.splice(a,1),this._virts&&each(this._virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),o){if(d)n=getImmediateCustomParentTag(d),isArray(n.tags[A])?each(n.tags[A],function(t,e){t._riot_id==c._riot_id&&n.tags[A].splice(e,1)}):n.tags[A]=e;else for(;r.firstChild;)r.removeChild(r.firstChild);t?remAttr(o,"riot-tag"):o.removeChild(r)}c.trigger("unmount"),toggle(),c.off("*"),c.isMounted=!1,delete w._tag}),parseNamedElements(s,this,T)}function setEventHandler(e,n,r,i){r[e]=function(e){var o=i._parent,a=i._item;if(!a)for(;o&&!a;)a=o._item,o=o._parent;e=e||t.event,e.item=a,n.call(i,e)===!0||/radio|check/.test(r.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||i.update()}}function insertTo(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function update(t,e){each(t,function(t,n){var r=t.dom,i=t.attr,o=b(t.expr,e),a=t.dom.parentNode;if(t.bool?(o=!!o,"selected"===i&&(r.__selected=o)):null==o&&(o=""),t.value!==o){if(t.value=o,!i)return o+="",void(a&&("TEXTAREA"===a.tagName?(a.value=o,h||(r.nodeValue=o)):r.nodeValue=o));if("value"===i)return void(r.value=o);if(remAttr(r,i),isFunction(o))setEventHandler(i,o,r,e);else if("if"==i){var c=t.stub,l=function(){insertTo(c.parentNode,c,r)},p=function(){insertTo(r.parentNode,r,c)};o?c&&(l(),r.inStub=!1,isInStub(r)||walk(r,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(c=t.stub=c||document.createTextNode(""),r.parentNode?p():(e.parent||e).one("updated",p),r.inStub=!0)}else"show"===i?r.style.display=o?"":"none":"hide"===i?r.style.display=o?"none":"":t.bool?(r[i]=o,o&&setAttr(r,i,i)):(0===o||o&&typeof o!==f)&&(startsWith(i,u)&&i!=s&&(i=i.slice(u.length)),setAttr(r,i,o))}})}function each(t,e){for(var n,r=t?t.length:0,i=0;r>i;i++)n=t[i],null!=n&&e(n,i)===!1&&i--;return t}function isFunction(t){return typeof t===d||!1}function isObject(t){return t&&typeof t===f}function remAttr(t,e){t.removeAttribute(e)}function toCamel(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function getAttr(t,e){return t.getAttribute(e)}function setAttr(t,e,n){t.setAttribute(e,n)}function getTag(t){return t.tagName&&o[getAttr(t,c)||getAttr(t,s)||t.tagName.toLowerCase()]}function addChildTag(t,e,n){var r=n.tags[e];r?(isArray(r)||r!==t&&(n.tags[e]=[r]),contains(n.tags[e],t)||n.tags[e].push(t)):n.tags[e]=t}function moveChildTag(t,e,n){var r,i=t.parent;i&&(r=i.tags[e],isArray(r)?r.splice(n,0,r.splice(r.indexOf(t),1)[0]):addChildTag(t,e,i))}function initChildTag(t,e,n,r){var i=new Tag(t,e,n),o=getTagName(e.root),a=getImmediateCustomParentTag(r);return i.parent=a,i._parent=r,addChildTag(i,o,a),a!==r&&addChildTag(i,o,r),e.root.innerHTML="",i}function getImmediateCustomParentTag(t){for(var e=t;!getTag(e.root)&&e.parent;)e=e.parent;return e}function defineProperty(t,e,n,r){return Object.defineProperty(t,e,extend({value:n,enumerable:!1,writable:!1,configurable:!1},r)),t}function getTagName(t){var e=getTag(t),n=getAttr(t,"name"),r=n&&!b.hasExpr(n)?n:e?e.name:t.tagName.toLowerCase();return r}function extend(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var i in e)isWritable(t,i)&&(t[i]=e[i]);return t}function contains(t,e){return~t.indexOf(e)}function isArray(t){return Array.isArray(t)||t instanceof Array}function isWritable(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return typeof t[e]===p||n&&n.writable}function cleanUpData(t){if(!(t instanceof Tag||t&&typeof t.trigger==d))return t;var e={};for(var n in t)contains(m,n)||(e[n]=t[n]);return e}function walk(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)walk(t,e),t=t.nextSibling}}function walkAttributes(t,e){for(var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=r.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function isInStub(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function mkEl(t){return document.createElement(t)}function $$(t,e){return(e||document).querySelectorAll(t)}function $(t,e){return(e||document).querySelector(t)}function inherit(t){function Child(){}return Child.prototype=t,new Child}function getNamedKey(t){return getAttr(t,"id")||getAttr(t,"name")}function setNamed(t,e,n){var r,i=getNamedKey(t),o=function(o){contains(n,i)||(r=isArray(o),o?(!r||r&&!contains(o,t))&&(r?o.push(t):e[i]=[o,t]):e[i]=t)};i&&(b.hasExpr(i)?e.one("mount",function(){i=getNamedKey(t),o(e[i])}):o(e[i]))}function startsWith(t,e){return t.slice(0,e.length)===e}function mountTo(t,e,n){var r=o[e],a=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",r&&t&&(r=new Tag(r,{root:t,opts:n},a)),r&&r.mount&&(r.mount(),contains(i,r)||i.push(r)),r}var n={version:"2.3.17",settings:{}},r=0,i=[],o={},a="__global_mixin",u="riot-",s=u+"tag",c="data-is",l="string",f="object",p="undefined",d="function",g=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,m=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],h=0|(t&&t.document||{}).documentMode;n.observable=function(t){t=t||{};var e={},n=Array.prototype.slice,r=function(t,e){t.replace(/\S+/g,e)};return Object.defineProperties(t,{on:{value:function(n,i){return"function"!=typeof i?t:(r(n,function(t,n){(e[t]=e[t]||[]).push(i),i.typed=n>0}),t)},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,i){return"*"!=n||i?r(n,function(t){if(i)for(var n,r=e[t],o=0;n=r&&r[o];++o)n==i&&r.splice(o--,1);else delete e[t]}):e={},t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,n){function on(){t.off(e,on),n.apply(t,arguments)}return t.on(e,on)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(i){for(var o,a=arguments.length-1,u=new Array(a),s=0;a>s;s++)u[s]=arguments[s+1];return r(i,function(r){o=n.call(e[r]||[],0);for(var i,a=0;i=o[a];++a){if(i.busy)return;i.busy=1,i.apply(t,i.typed?[r].concat(u):u),o[a]!==i&&a--,i.busy=0}e["*"]&&"*"!=r&&t.trigger.apply(t,["*",r].concat(u))}),t},enumerable:!1,writable:!1,configurable:!1}}),t},function(e){function DEFAULT_PARSER(t){return t.split(/[\/?#]/)}function DEFAULT_SECOND_PARSER(t,e){var n=new RegExp("^"+e[p](/\*/g,"([^/?#]+?)")[p](/\.\./,".*")+"$"),r=t.match(n);return r?r.slice(1):void 0}function debounce(t,e){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}function start(t){n=debounce(emit,1),v[l](d,n),v[l](g,n),b[l](T,click),t&&emit(!0)}function Router(){this.$=[],e.observable(this),A.on("stop",this.s.bind(this)),A.on("emit",this.e.bind(this))}function normalize(t){return t[p](/^\/|\/$/,"")}function isString(t){return"string"==typeof t}function getPathFromRoot(t){return(t||y.href||"")[p](u,"")}function getPathFromBase(t){return"#"==r[0]?(t||y.href||"").split(r)[1]||"":getPathFromRoot(t)[p](r,"")}function emit(t){var e=0==N;if(!(N>=h)&&(N++,C.push(function(){var e=getPathFromBase();(t||e!=i)&&(A[m]("emit",e),i=e)}),e)){for(;C.length;)C[0](),C.shift();N=0}}function click(t){if(!(1!=t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!=e.nodeName;)e=e.parentNode;!e||"A"!=e.nodeName||e[f]("download")||!e[f]("href")||e.target&&"_self"!=e.target||-1==e.href.indexOf(y.href.match(u)[0])||(e.href==y.href||e.href.split("#")[0]!=y.href.split("#")[0]&&("#"==r||0===getPathFromRoot(e.href).indexOf(r))&&go(getPathFromBase(e.href),e.title||b.title))&&t.preventDefault()}}function go(t,e,n){return _?(t=r+normalize(t),e=e||b.title,n?_.replaceState(null,e,t):_.pushState(null,e,t),b.title=e,E=!1,emit(),E):A[m]("emit",getPathFromBase(t))}var n,r,i,o,a,u=/^.+?\/+[^\/]+/,s="EventListener",c="remove"+s,l="add"+s,f="hasAttribute",p="replace",d="popstate",g="hashchange",m="trigger",h=3,v="undefined"!=typeof t&&t,b="undefined"!=typeof document&&document,_=v&&history,y=v&&(_.location||v.location),x=Router.prototype,T=b&&b.ontouchstart?"touchstart":"click",w=!1,A=e.observable(),E=!1,C=[],N=0;x.m=function(t,e,n){!isString(t)||e&&!isString(e)?e?this.r(t,e):this.r("@",t):go(t,e,n||!1)},x.s=function(){this.off("*"),this.$=[]},x.e=function(t){this.$.concat("@").some(function(e){var n=("@"==e?o:a)(normalize(t),normalize(e));return"undefined"!=typeof n?(this[m].apply(null,[e].concat(n)),E=!0):void 0},this)},x.r=function(t,e){"@"!=t&&(t="/"+normalize(t),this.$.push(t)),this.on(t,e)};var k=new Router,S=k.m.bind(k);S.create=function(){var t=new Router;return t.m.stop=t.s.bind(t),t.m.bind(t)},S.base=function(t){r=t||"#",i=getPathFromBase()},S.exec=function(){emit(!0)},S.parser=function(t,e){t||e||(o=DEFAULT_PARSER,a=DEFAULT_SECOND_PARSER),t&&(o=t),e&&(a=e)},S.query=function(){var t={},e=y.href||i;return e[p](/[?&](.+?)=([^&]*)/g,function(e,n,r){t[n]=r}),t},S.stop=function(){w&&(v&&(v[c](d,n),v[c](g,n),b[c](T,click)),A[m]("stop"),w=!1)},S.start=function(t){w||(v&&("complete"==document.readyState?start(t):v[l]("load",function(){setTimeout(function(){start(t)},1)})),w=!0)},S.base(),S.parser(),e.route=S}(n);var v=function(t){function _loopback(t){return t}function _rewrite(t,e){return e||(e=p),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?i:"")}function _create(t){if(t===c)return l;var e=t.split(" ");if(2!==e.length||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" ")),e[4]=_rewrite(e[1].length>1?/{[\S\s]*?}/:l[4],e),e[5]=_rewrite(t.length>3?/\\({|})/g:l[5],e),e[6]=_rewrite(l[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+u,i),e[8]=t,e}function _brackets(t){return t instanceof RegExp?e(t):p[t]}function _reset(t){(t||(t=c))!==p[8]&&(p=_create(t),e=t===c?_loopback:_rewrite,p[9]=e(l[9]),p[10]=e(l[10])),f=t}function _setSettings(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:_reset,get:function(){return f},enumerable:!0}),r=t,_reset(e)}var e,r,i="g",o=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,a=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,u=a.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,s={"(":RegExp("([()])|"+u,i),"[":RegExp("([[\\]])|"+u,i),"{":RegExp("([{}])|"+u,i)},c="{ }",l=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+u,i),c,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],f=t,p=[];return _brackets.split=function split(t,e,n){function unescapeStr(t){e||i?u.push(t&&t.replace(n[5],"$1")):u.push(t)}function skipBraces(t,e,n){var r,i=s[e];for(i.lastIndex=n,n=1;(r=i.exec(t))&&(!r[1]||(r[1]===e?++n:--n)););return n?t.length:i.lastIndex}n||(n=p);var r,i,o,a,u=[],c=n[6];for(i=o=c.lastIndex=0;r=c.exec(t);){if(a=r.index,i){if(r[2]){c.lastIndex=skipBraces(t,r[2],c.lastIndex);continue}if(!r[3])continue}r[1]||(unescapeStr(t.slice(o,a)),o=c.lastIndex,c=n[6+(i^=1)],c.lastIndex=o)}return t&&o<t.length&&unescapeStr(t.slice(o)),u},_brackets.hasExpr=function hasExpr(t){return p[4].test(t)},_brackets.loopKeys=function loopKeys(t){var e=t.match(p[9]);return e?{key:e[1],pos:e[2],val:p[0]+e[3].trim()+p[1]}:{val:t.trim()}},_brackets.hasRaw=function(t){return p[10].test(t)},_brackets.array=function array(t){return t?_create(t):p},Object.defineProperty(_brackets,"settings",{set:_setSettings,get:function(){return r}}),_brackets.settings="undefined"!=typeof n&&n.settings||{},_brackets.set=_reset,_brackets.R_STRINGS=a,_brackets.R_MLCOMMS=o,_brackets.S_QBLOCKS=u,_brackets}(),b=function(){function _tmpl(t,n){return t?(e[t]||(e[t]=_create(t))).call(n,_logErr):t}function _logErr(t,e){_tmpl.errorHandler&&(t.riotData={tagName:e&&e.root&&e.root.tagName,_riot_id:e&&e._riot_id},_tmpl.errorHandler(t))}function _create(t){var e=_getTmpl(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function _getTmpl(t){var e,n=[],i=v.split(t.replace(/\u2057/g,'"'),1);if(i.length>2||i[0]){var o,a,u=[];for(o=a=0;o<i.length;++o)e=i[o],e&&(e=1&o?_parseExpr(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(u[a++]=e);e=2>a?u[0]:"["+u.join(",")+'].join("")'}else e=_parseExpr(i[1],0,n);return n[0]&&(e=e.replace(r,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function _parseExpr(t,e,r){function skipBraces(e,n){var r,o=1,a=i[e];for(a.lastIndex=n.lastIndex;r=a.exec(t);)if(r[0]===e)++o;else if(!--o)break;n.lastIndex=o?t.length:a.lastIndex}if("="===t[0]&&(t=t.slice(1)),t=t.replace(n,function(t,e){return t.length>2&&!e?""+(r.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var a,u=[],s=0;t&&(a=t.match(o))&&!a.index;){var c,l,f=/,|([[{(])|$/g;for(t=RegExp.rightContext,c=a[2]?r[a[2]].slice(1,-1).trim().replace(/\s+/g," "):a[1];l=(a=f.exec(t))[1];)skipBraces(l,f);l=t.slice(0,a.index),t=RegExp.rightContext,u[s++]=_wrapExpr(l,1,c)}t=s?s>1?"["+u.join(",")+'].join(" ").trim()':u[0]:_wrapExpr(t,e)}return t}function _wrapExpr(t,e,n){var r;return t=t.replace(u,function(t,e,n,i,o){return n&&(i=r?0:i+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+a+n,i&&(r="."===(o=o[i])||"("===o||"["===o)):i&&(r=!s.test(o.slice(i)))),t}),r&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(r?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(r?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var e={};_tmpl.haveRaw=v.hasRaw,_tmpl.hasExpr=v.hasExpr,_tmpl.loopKeys=v.loopKeys,_tmpl.errorHandler=null;var n=RegExp(v.S_QBLOCKS,"g"),r=/\x01(\d+)~/g,i={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},o=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,a='"in this?this:'+("object"!=typeof t?"global":"window")+").",u=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,s=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return _tmpl.parse=function(t){return t},_tmpl.version=v.version="v2.3.21",_tmpl}(),_=function _mkdom(){function _mkdom(t,e){var n=t&&t.match(/^\s*<([-\w]+)/),r=n&&n[1].toLowerCase(),i=mkEl("div");return t=replaceYield(t,e),o.test(r)?i=specialTags(i,t,r):i.innerHTML=t,i.stub=!0,i}function specialTags(t,e,n){var r="o"===n[0],o=r?"select>":"table>";if(t.innerHTML="<"+o+e.trim()+"</"+o,o=t.firstChild,r)o.selectedIndex=-1;else{var a=i[n];a&&1===o.childElementCount&&(o=$(a,o))}return o}function replaceYield(i,o){if(!t.test(i))return i;var a={};return o=o&&o.replace(n,function(t,e,n){return a[e]=a[e]||n,""}).trim(),i.replace(r,function(t,e,n){return a[e]||n||""}).replace(e,function(t,e){return o||e||""})}var t=/<yield\b/i,e=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,n=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,r=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,i={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},o=h&&10>h?g:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;return _mkdom}(),y=function(e){if(!t)return{add:function(){},inject:function(){}};var n=function(){var t=mkEl("style");setAttr(t,"type","text/css");var e=$("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),r=n.styleSheet,i="";return Object.defineProperty(e,"styleNode",{value:n,writable:!0}),{add:function(t){i+=t},inject:function(){i&&(r?r.cssText+=i:n.innerHTML+=i,i="")}}}(n),x=function(t){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame;if(!e||/iP(ad|hone|od).*OS 6/.test(t.navigator.userAgent)){var n=0;e=function(t){var e=Date.now(),r=Math.max(16-(e-n),0);setTimeout(function(){t(n=e+r)},r)}}return e}(t||{});n.util={brackets:v,tmpl:b},n.mixin=function(){var t={};return function(e,n){return isObject(e)?(n=e,void(t[a]=extend(t[a]||{},n))):n?void(t[e]=n):t[e]}}(),n.tag=function(t,e,n,r,i){return isFunction(r)&&(i=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(isFunction(n)?i=n:y.add(n)),t=t.toLowerCase(),o[t]={name:t,tmpl:e,attrs:r,fn:i},t},n.tag2=function(t,e,n,r,i){return n&&y.add(n),o[t]={name:t,tmpl:e,attrs:r,fn:i},t},n.mount=function(t,e,n){function addRiotTags(t){var e="";return each(t,function(t){/[^-\w]/.test(t)||(t=t.trim().toLowerCase(),e+=",["+c+'="'+t+'"],['+s+'="'+t+'"]')}),e}function selectAllTags(){var t=Object.keys(o);return t+addRiotTags(t)}function pushTags(t){if(t.tagName){var r=getAttr(t,c)||getAttr(t,s);e&&r!==e&&(r=e,setAttr(t,c,e));var i=mountTo(t,r||t.tagName.toLowerCase(),n);i&&a.push(i)}else t.length&&each(t,pushTags)}var r,i,a=[];if(y.inject(),isObject(e)&&(n=e,e=0),typeof t===l?("*"===t?t=i=selectAllTags():t+=addRiotTags(t.split(/, */)),r=t?$$(t):[]):r=t,"*"===e){if(e=i||selectAllTags(),r.tagName)r=$$(e,r);else{var u=[];each(r,function(t){u.push($$(e,t))}),r=u}e=0}return pushTags(r),a},n.update=function(){return each(i,function(t){t.update()})},n.Tag=Tag,typeof exports===f?module.exports=n:typeof define===d&&typeof define.amd!==p?define(function(){return n}):t.riot=n}("undefined"!=typeof window?window:void 0);
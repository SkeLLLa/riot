!function(e,t){"use strict";function mkitem(e,t,n){var r={};return r[e.key]=t,e.pos&&(r[e.pos]=n),r}function unmountRedundant(e,t){for(var n,r=t.length,i=e.length;r>i;)n=t[--r],t.splice(r,1),n.unmount()}function moveNestedTags(e,t){Object.keys(e.tags).forEach(function(n){var r=e.tags[n];isArray(r)?each(r,function(e){moveChildTag(e,n,t)}):moveChildTag(r,n,t)})}function addVirtual(e,t,n){var r,i=e._root;for(e._virts=[];i;)r=i.nextSibling,n?t.insertBefore(i,n._root):t.appendChild(i),e._virts.push(i),i=r}function moveVirtual(e,t,n,r){for(var i,o=e._root,a=0;r>a;a++)i=o.nextSibling,t.insertBefore(o,n._root),o=i}function _each(e,t,n){remAttr(e,"each");var r,i=typeof getAttr(e,"no-reorder")!==l||remAttr(e,"no-reorder"),a=getTagName(e),s=o[a]||{tmpl:e.outerHTML},u=g.test(a),c=e.parentNode,p=document.createTextNode(""),f=getTag(e),d="option"===a.toLowerCase(),m=[],h=[],v="VIRTUAL"==e.tagName;n=b.loopKeys(n),c.insertBefore(p,e),t.one("before-mount",function(){e.parentNode.removeChild(e),c.stub&&(c=t.root)}).on("update",function(){var l=b(n.val,t),g=document.createDocumentFragment();isArray(l)||(r=l||!1,l=r?Object.keys(l).map(function(e){return mkitem(n,e,l[e])}):[]);for(var _=0,x=l.length;x>_;_++){var y=l[_],w=i&&y instanceof Object&&!r,S=h.indexOf(y),T=~S&&w?S:_,E=m[T];y=!r&&n.key?mkitem(n,y,_):y,!w&&!E||w&&!~S||!E?(E=new Tag(s,{parent:t,isLoop:!0,hasImpl:!!o[a],root:u?c:e.cloneNode(),item:y},e.innerHTML),E.mount(),v&&(E._root=E.root.firstChild),_!=m.length&&m[_]?(v?addVirtual(E,c,m[_]):c.insertBefore(E.root,m[_].root),h.splice(_,0,y)):v?addVirtual(E,g):g.appendChild(E.root),m.splice(_,0,E),T=_):E.update(y,!0),T!==_&&w&&m[_]&&(v?moveVirtual(E,c,m[_],e.childNodes.length):c.insertBefore(E.root,m[_].root),n.pos&&(E[n.pos]=_),m.splice(_,0,m.splice(T,1)[0]),h.splice(_,0,h.splice(T,1)[0]),!f&&E.tags&&moveNestedTags(E,_)),E._item=y,defineProperty(E,"_parent",t)}if(unmountRedundant(l,m),d){if(c.appendChild(g),c.length){var C,A=c.options;for(c.selectedIndex=C=-1,_=0;_<A.length;_++)(A[_].selected=A[_].__selected)&&0>C&&(c.selectedIndex=C=_)}}else c.insertBefore(g,p);f&&(t.tags[a]=m),h=l.slice()})}function parseNamedElements(e,t,n,r){walk(e,function(e){if(1==e.nodeType){if(e.isLoop=e.isLoop||e.parentNode&&e.parentNode.isLoop||getAttr(e,"each")?1:0,n){var i=getTag(e);i&&!e.isLoop&&n.push(initChildTag(i,{root:e,parent:t},e.innerHTML,t))}e.isLoop&&!r||setNamed(e,t,[])}})}function parseExpressions(e,t,n){function addExpr(e,t,r){b.hasExpr(t)&&n.push(extend({dom:e,expr:t},r))}walk(e,function(e){var n,r=e.nodeType;return 3==r&&"STYLE"!=e.parentNode.tagName&&addExpr(e,e.nodeValue),1==r?(n=getAttr(e,"each"))?(_each(e,t,n),!1):(each(e.attributes,function(t){var n=t.name,r=n.split("__")[1];return addExpr(e,t.value,{attr:r||n,bool:r}),r?(remAttr(e,n),!1):void 0}),getTag(e)?!1:void 0):void 0})}function Tag(e,o,s){function updateOpts(){var e=h&&g?c:d||c;each(S.attributes,function(t){var n=t.value;p[toCamel(t.name)]=b.hasExpr(n)?b(n,e):n}),each(Object.keys(E),function(t){p[toCamel(t)]=b(E[t],e)})}function normalizeData(e){for(var t in v)typeof c[t]!==f&&isWritable(c,t)&&(c[t]=e[t])}function inheritFromParent(){c.parent&&g&&each(Object.keys(c.parent),function(e){var t=!contains(m,e)&&contains(C,e);(typeof c[e]===f||t)&&(t||C.push(e),c[e]=c.parent[e])})}function onChildUpdate(e){c.update(e,!0)}function toggle(e){if(each(w,function(t){t[e?"mount":"unmount"]()}),d){var t=e?"on":"off";g?d[t]("unmount",c.unmount):d[t]("update",onChildUpdate)[t]("unmount",c.unmount)}}var u,c=n.observable(this),p=inherit(o.opts)||{},d=o.parent,g=o.isLoop,h=o.hasImpl,v=cleanUpData(o.item),x=[],w=[],S=o.root,T=S.tagName.toLowerCase(),E={},C=[];e.name&&S._tag&&S._tag.unmount(!0),this.isMounted=!1,S.isLoop=g,S._tag=this,defineProperty(this,"_riot_id",++r),extend(this,{parent:d,root:S,opts:p,tags:{}},v),each(S.attributes,function(e){var t=e.value;b.hasExpr(t)&&(E[e.name]=t)}),u=_(e.tmpl,s),defineProperty(this,"update",function(e,t){return e=cleanUpData(e),inheritFromParent(),e&&isObject(v)&&(normalizeData(e),v=e),extend(c,e),updateOpts(),c.trigger("update",e),update(x,c),t&&c.parent?c.parent.one("updated",function(){c.trigger("updated")}):y(function(){c.trigger("updated")}),this}),defineProperty(this,"mixin",function(){return each(arguments,function(e){var t;e=typeof e===l?n.mixin(e):e,isFunction(e)?(t=new e,e=e.prototype):t=e,each(Object.getOwnPropertyNames(e),function(e){"init"!=e&&(c[e]=isFunction(t[e])?t[e].bind(c):t[e])}),t.init&&t.init.bind(c)()}),this}),defineProperty(this,"mount",function(){updateOpts();var t=n.mixin(a);if(t&&c.mixin(t),e.fn&&e.fn.call(c,p),parseExpressions(u,c,x),toggle(!0),e.attrs&&walkAttributes(e.attrs,function(e,t){setAttr(S,e,t)}),(e.attrs||h)&&parseExpressions(c.root,c,x),c.parent&&!g||c.update(v),c.trigger("before-mount"),g&&!h)S=u.firstChild;else{for(;u.firstChild;)S.appendChild(u.firstChild);S.stub&&(S=d.root)}defineProperty(c,"root",S),g&&parseNamedElements(c.root,c.parent,null,!0),!c.parent||c.parent.isMounted?(c.isMounted=!0,c.trigger("mount")):c.parent.one("mount",function(){isInStub(c.root)||(c.parent.isMounted=c.isMounted=!0,c.trigger("mount"))})}),defineProperty(this,"unmount",function(e){var n,r=S,o=r.parentNode,a=i.indexOf(c);if(c.trigger("before-unmount"),~a&&i.splice(a,1),this._virts&&each(this._virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),o){if(d)n=getImmediateCustomParentTag(d),isArray(n.tags[T])?each(n.tags[T],function(e,t){e._riot_id==c._riot_id&&n.tags[T].splice(t,1)}):n.tags[T]=t;else for(;r.firstChild;)r.removeChild(r.firstChild);e?remAttr(o,"riot-tag"):o.removeChild(r)}c.trigger("unmount"),toggle(),c.off("*"),c.isMounted=!1,delete S._tag}),parseNamedElements(u,this,w)}function setEventHandler(t,n,r,i){r[t]=function(t){var o=i._parent,a=i._item;if(!a)for(;o&&!a;)a=o._item,o=o._parent;t=t||e.event,t.item=a,n.call(i,t)===!0||/radio|check/.test(r.type)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1),t.preventUpdate||i.update()}}function insertTo(e,t,n){e&&(e.insertBefore(n,t),e.removeChild(t))}function update(e,t){each(e,function(e,n){var r=e.dom,i=e.attr,o=b(e.expr,t),a=e.dom.parentNode;if(e.bool?(o=!!o,"selected"===i&&(r.__selected=o)):null==o&&(o=""),e.value!==o){if(e.value=o,!i)return o+="",void(a&&("TEXTAREA"===a.tagName?(a.value=o,h||(r.nodeValue=o)):r.nodeValue=o));if("value"===i)return void(r.value=o);if(remAttr(r,i),isFunction(o))setEventHandler(i,o,r,t);else if("if"==i){var c=e.stub,l=function(){insertTo(c.parentNode,c,r)},f=function(){insertTo(r.parentNode,r,c)};o?c&&(l(),r.inStub=!1,isInStub(r)||walk(r,function(e){e._tag&&!e._tag.isMounted&&(e._tag.isMounted=!!e._tag.trigger("mount"))})):(c=e.stub=c||document.createTextNode(""),r.parentNode?f():(t.parent||t).one("updated",f),r.inStub=!0)}else"show"===i?r.style.display=o?"":"none":"hide"===i?r.style.display=o?"none":"":e.bool?(r[i]=o,o&&setAttr(r,i,i)):(0===o||o&&typeof o!==p)&&(startsWith(i,s)&&i!=u&&(i=i.slice(s.length)),setAttr(r,i,o))}})}function each(e,t){for(var n,r=e?e.length:0,i=0;r>i;i++)n=e[i],null!=n&&t(n,i)===!1&&i--;return e}function isFunction(e){return typeof e===d||!1}function isObject(e){return e&&typeof e===p}function remAttr(e,t){e.removeAttribute(t)}function toCamel(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function getAttr(e,t){return e.getAttribute(t)}function setAttr(e,t,n){e.setAttribute(t,n)}function getTag(e){return e.tagName&&o[getAttr(e,c)||getAttr(e,u)||e.tagName.toLowerCase()]}function addChildTag(e,t,n){var r=n.tags[t];r?(isArray(r)||r!==e&&(n.tags[t]=[r]),contains(n.tags[t],e)||n.tags[t].push(e)):n.tags[t]=e}function moveChildTag(e,t,n){var r,i=e.parent;i&&(r=i.tags[t],isArray(r)?r.splice(n,0,r.splice(r.indexOf(e),1)[0]):addChildTag(e,t,i))}function initChildTag(e,t,n,r){var i=new Tag(e,t,n),o=getTagName(t.root),a=getImmediateCustomParentTag(r);return i.parent=a,i._parent=r,addChildTag(i,o,a),a!==r&&addChildTag(i,o,r),t.root.innerHTML="",i}function getImmediateCustomParentTag(e){for(var t=e;!getTag(t.root)&&t.parent;)t=t.parent;return t}function defineProperty(e,t,n,r){return Object.defineProperty(e,t,extend({value:n,enumerable:!1,writable:!1,configurable:!1},r)),e}function getTagName(e){var t=getTag(e),n=getAttr(e,"name"),r=n&&!b.hasExpr(n)?n:t?t.name:e.tagName.toLowerCase();return r}function extend(e){for(var t,n=arguments,r=1;r<n.length;++r)if(t=n[r])for(var i in t)isWritable(e,i)&&(e[i]=t[i]);return e}function contains(e,t){return~e.indexOf(t)}function isArray(e){return Array.isArray(e)||e instanceof Array}function isWritable(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return typeof e[t]===f||n&&n.writable}function cleanUpData(e){if(!(e instanceof Tag||e&&typeof e.trigger==d))return e;var t={};for(var n in e)contains(m,n)||(t[n]=e[n]);return t}function walk(e,t){if(e){if(t(e)===!1)return;for(e=e.firstChild;e;)walk(e,t),e=e.nextSibling}}function walkAttributes(e,t){for(var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=r.exec(e);)t(n[1].toLowerCase(),n[2]||n[3]||n[4])}function isInStub(e){for(;e;){if(e.inStub)return!0;e=e.parentNode}return!1}function mkEl(e){return document.createElement(e)}function $$(e,t){return(t||document).querySelectorAll(e)}function $(e,t){return(t||document).querySelector(e)}function inherit(e){function Child(){}return Child.prototype=e,new Child}function getNamedKey(e){return getAttr(e,"id")||getAttr(e,"name")}function setNamed(e,t,n){var r,i=getNamedKey(e),o=function(o){contains(n,i)||(r=isArray(o),o?(!r||r&&!contains(o,e))&&(r?o.push(e):t[i]=[o,e]):t[i]=e)};i&&(b.hasExpr(i)?t.one("mount",function(){i=getNamedKey(e),o(t[i])}):o(t[i]))}function startsWith(e,t){return e.slice(0,t.length)===t}function mountTo(e,t,n){var r=o[t],a=e._innerHTML=e._innerHTML||e.innerHTML;return e.innerHTML="",r&&e&&(r=new Tag(r,{root:e,opts:n},a)),r&&r.mount&&(r.mount(),contains(i,r)||i.push(r)),r}var n={version:"2.3.17",settings:{}},r=0,i=[],o={},a="__global_mixin",s="riot-",u=s+"tag",c="data-is",l="string",p="object",f="undefined",d="function",g=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,m=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],h=0|(e&&e.document||{}).documentMode;n.observable=function(e){e=e||{};var t={},n=Array.prototype.slice,r=function(e,t){e.replace(/\S+/g,t)};return Object.defineProperties(e,{on:{value:function(n,i){return"function"!=typeof i?e:(r(n,function(e,n){(t[e]=t[e]||[]).push(i),i.typed=n>0}),e)},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,i){return"*"!=n||i?r(n,function(e){if(i)for(var n,r=t[e],o=0;n=r&&r[o];++o)n==i&&r.splice(o--,1);else delete t[e]}):t={},e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,n){function on(){e.off(t,on),n.apply(e,arguments)}return e.on(t,on)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(i){for(var o,a=arguments.length-1,s=new Array(a),u=0;a>u;u++)s[u]=arguments[u+1];return r(i,function(r){o=n.call(t[r]||[],0);for(var i,a=0;i=o[a];++a){if(i.busy)return;i.busy=1,i.apply(e,i.typed?[r].concat(s):s),o[a]!==i&&a--,i.busy=0}t["*"]&&"*"!=r&&e.trigger.apply(e,["*",r].concat(s))}),e},enumerable:!1,writable:!1,configurable:!1}}),e},function(t){function DEFAULT_PARSER(e){return e.split(/[\/?#]/)}function DEFAULT_SECOND_PARSER(e,t){var n=new RegExp("^"+t[f](/\*/g,"([^/?#]+?)")[f](/\.\./,".*")+"$"),r=e.match(n);return r?r.slice(1):void 0}function debounce(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function start(e){n=debounce(emit,1),v[l](d,n),v[l](g,n),b[l](w,click),e&&emit(!0)}function Router(){this.$=[],t.observable(this),T.on("stop",this.s.bind(this)),T.on("emit",this.e.bind(this))}function normalize(e){return e[f](/^\/|\/$/,"")}function isString(e){return"string"==typeof e}function getPathFromRoot(e){return(e||x.href||"")[f](s,"")}function getPathFromBase(e){return"#"==r[0]?(e||x.href||"").split(r)[1]||"":getPathFromRoot(e)[f](r,"")}function emit(e){var t=0==A;if(!(A>=h)&&(A++,C.push(function(){var t=getPathFromBase();(e||t!=i)&&(T[m]("emit",t),i=t)}),t)){for(;C.length;)C[0](),C.shift();A=0}}function click(e){if(!(1!=e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!=t.nodeName;)t=t.parentNode;!t||"A"!=t.nodeName||t[p]("download")||!t[p]("href")||t.target&&"_self"!=t.target||-1==t.href.indexOf(x.href.match(s)[0])||(t.href==x.href||t.href.split("#")[0]!=x.href.split("#")[0]&&("#"==r||0===getPathFromRoot(t.href).indexOf(r))&&go(getPathFromBase(t.href),t.title||b.title))&&e.preventDefault()}}function go(e,t,n){return _?(e=r+normalize(e),t=t||b.title,n?_.replaceState(null,t,e):_.pushState(null,t,e),b.title=t,E=!1,emit(),E):T[m]("emit",getPathFromBase(e))}var n,r,i,o,a,s=/^.+?\/+[^\/]+/,u="EventListener",c="remove"+u,l="add"+u,p="hasAttribute",f="replace",d="popstate",g="hashchange",m="trigger",h=3,v="undefined"!=typeof e&&e,b="undefined"!=typeof document&&document,_=v&&history,x=v&&(_.location||v.location),y=Router.prototype,w=b&&b.ontouchstart?"touchstart":"click",S=!1,T=t.observable(),E=!1,C=[],A=0;y.m=function(e,t,n){!isString(e)||t&&!isString(t)?t?this.r(e,t):this.r("@",e):go(e,t,n||!1)},y.s=function(){this.off("*"),this.$=[]},y.e=function(e){this.$.concat("@").some(function(t){var n=("@"==t?o:a)(normalize(e),normalize(t));return"undefined"!=typeof n?(this[m].apply(null,[t].concat(n)),E=!0):void 0},this)},y.r=function(e,t){"@"!=e&&(e="/"+normalize(e),this.$.push(e)),this.on(e,t)};var k=new Router,N=k.m.bind(k);N.create=function(){var e=new Router;return e.m.stop=e.s.bind(e),e.m.bind(e)},N.base=function(e){r=e||"#",i=getPathFromBase()},N.exec=function(){emit(!0)},N.parser=function(e,t){e||t||(o=DEFAULT_PARSER,a=DEFAULT_SECOND_PARSER),e&&(o=e),t&&(a=t)},N.query=function(){var e={},t=x.href||i;return t[f](/[?&](.+?)=([^&]*)/g,function(t,n,r){e[n]=r}),e},N.stop=function(){S&&(v&&(v[c](d,n),v[c](g,n),b[c](w,click)),T[m]("stop"),S=!1)},N.start=function(e){S||(v&&("complete"==document.readyState?start(e):v[l]("load",function(){setTimeout(function(){start(e)},1)})),S=!0)},N.base(),N.parser(),t.route=N}(n);var v=function(e){function _loopback(e){return e}function _rewrite(e,t){return t||(t=f),new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?i:"")}function _create(e){if(e===c)return l;var t=e.split(" ");if(2!==t.length||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(e))throw new Error('Unsupported brackets "'+e+'"');return t=t.concat(e.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" ")),t[4]=_rewrite(t[1].length>1?/{[\S\s]*?}/:l[4],t),t[5]=_rewrite(e.length>3?/\\({|})/g:l[5],t),t[6]=_rewrite(l[6],t),t[7]=RegExp("\\\\("+t[3]+")|([[({])|("+t[3]+")|"+s,i),t[8]=e,t}function _brackets(e){return e instanceof RegExp?t(e):f[e]}function _reset(e){(e||(e=c))!==f[8]&&(f=_create(e),t=e===c?_loopback:_rewrite,f[9]=t(l[9]),f[10]=t(l[10])),p=e}function _setSettings(e){var t;e=e||{},t=e.brackets,Object.defineProperty(e,"brackets",{set:_reset,get:function(){return p},enumerable:!0}),r=e,_reset(t)}var t,r,i="g",o=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,a=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,s=a.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,u={"(":RegExp("([()])|"+s,i),"[":RegExp("([[\\]])|"+s,i),"{":RegExp("([{}])|"+s,i)},c="{ }",l=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+s,i),c,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],p=e,f=[];return _brackets.split=function split(e,t,n){function unescapeStr(e){t||i?s.push(e&&e.replace(n[5],"$1")):s.push(e)}function skipBraces(e,t,n){var r,i=u[t];for(i.lastIndex=n,n=1;(r=i.exec(e))&&(!r[1]||(r[1]===t?++n:--n)););return n?e.length:i.lastIndex}n||(n=f);var r,i,o,a,s=[],c=n[6];for(i=o=c.lastIndex=0;r=c.exec(e);){if(a=r.index,i){if(r[2]){c.lastIndex=skipBraces(e,r[2],c.lastIndex);continue}if(!r[3])continue}r[1]||(unescapeStr(e.slice(o,a)),o=c.lastIndex,c=n[6+(i^=1)],c.lastIndex=o)}return e&&o<e.length&&unescapeStr(e.slice(o)),s},_brackets.hasExpr=function hasExpr(e){return f[4].test(e)},_brackets.loopKeys=function loopKeys(e){var t=e.match(f[9]);return t?{key:t[1],pos:t[2],val:f[0]+t[3].trim()+f[1]}:{val:e.trim()}},_brackets.hasRaw=function(e){return f[10].test(e)},_brackets.array=function array(e){return e?_create(e):f},Object.defineProperty(_brackets,"settings",{set:_setSettings,get:function(){return r}}),_brackets.settings="undefined"!=typeof n&&n.settings||{},_brackets.set=_reset,_brackets.R_STRINGS=a,_brackets.R_MLCOMMS=o,_brackets.S_QBLOCKS=s,_brackets}(),b=function(){function _tmpl(e,n){return e?(t[e]||(t[e]=_create(e))).call(n,_logErr):e}function _logErr(e,t){_tmpl.errorHandler&&(e.riotData={tagName:t&&t.root&&t.root.tagName,_riot_id:t&&t._riot_id},_tmpl.errorHandler(e))}function _create(e){var t=_getTmpl(e);return"try{return "!==t.slice(0,11)&&(t="return "+t),new Function("E",t+";")}function _getTmpl(e){var t,n=[],i=v.split(e.replace(/\u2057/g,'"'),1);if(i.length>2||i[0]){var o,a,s=[];for(o=a=0;o<i.length;++o)t=i[o],t&&(t=1&o?_parseExpr(t,1,n):'"'+t.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[a++]=t);t=2>a?s[0]:"["+s.join(",")+'].join("")'}else t=_parseExpr(i[1],0,n);return n[0]&&(t=t.replace(r,function(e,t){return n[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),t}function _parseExpr(e,t,r){function skipBraces(t,n){var r,o=1,a=i[t];for(a.lastIndex=n.lastIndex;r=a.exec(e);)if(r[0]===t)++o;else if(!--o)break;n.lastIndex=o?e.length:a.lastIndex}if("="===e[0]&&(e=e.slice(1)),e=e.replace(n,function(e,t){return e.length>2&&!t?""+(r.push(e)-1)+"~":e}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var a,s=[],u=0;e&&(a=e.match(o))&&!a.index;){var c,l,p=/,|([[{(])|$/g;for(e=RegExp.rightContext,c=a[2]?r[a[2]].slice(1,-1).trim().replace(/\s+/g," "):a[1];l=(a=p.exec(e))[1];)skipBraces(l,p);l=e.slice(0,a.index),e=RegExp.rightContext,s[u++]=_wrapExpr(l,1,c)}e=u?u>1?"["+s.join(",")+'].join(" ").trim()':s[0]:_wrapExpr(e,t)}return e}function _wrapExpr(e,t,n){var r;return e=e.replace(s,function(e,t,n,i,o){return n&&(i=r?0:i+e.length,"this"!==n&&"global"!==n&&"window"!==n?(e=t+'("'+n+a+n,i&&(r="."===(o=o[i])||"("===o||"["===o)):i&&(r=!u.test(o.slice(i)))),e}),r&&(e="try{return "+e+"}catch(e){E(e,this)}"),n?e=(r?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+n+'":""':t&&(e="function(v){"+(r?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'),e}var t={};_tmpl.haveRaw=v.hasRaw,_tmpl.hasExpr=v.hasExpr,_tmpl.loopKeys=v.loopKeys,_tmpl.errorHandler=null;var n=RegExp(v.S_QBLOCKS,"g"),r=/\x01(\d+)~/g,i={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},o=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,a='"in this?this:'+("object"!=typeof e?"global":"window")+").",s=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,u=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return _tmpl.parse=function(e){return e},_tmpl.version=v.version="v2.3.21",_tmpl}(),_=function _mkdom(){function _mkdom(e,t){var n=e&&e.match(/^\s*<([-\w]+)/),r=n&&n[1].toLowerCase(),i=mkEl("div");return e=replaceYield(e,t),o.test(r)?i=specialTags(i,e,r):i.innerHTML=e,i.stub=!0,i}function specialTags(e,t,n){var r="o"===n[0],o=r?"select>":"table>";if(e.innerHTML="<"+o+t.trim()+"</"+o,o=e.firstChild,r)o.selectedIndex=-1;else{var a=i[n];a&&1===o.childElementCount&&(o=$(a,o))}return o}function replaceYield(i,o){if(!e.test(i))return i;var a={};return o=o&&o.replace(n,function(e,t,n){return a[t]=a[t]||n,""}).trim(),i.replace(r,function(e,t,n){return a[t]||n||""}).replace(t,function(e,t){return o||t||""})}var e=/<yield\b/i,t=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,n=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,r=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,i={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},o=h&&10>h?g:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;return _mkdom}(),x=function(t){if(!e)return{add:function(){},inject:function(){}};var n=function(){var e=mkEl("style");setAttr(e,"type","text/css");var t=$("style[type=riot]");return t?(t.id&&(e.id=t.id),t.parentNode.replaceChild(e,t)):document.getElementsByTagName("head")[0].appendChild(e),e}(),r=n.styleSheet,i="";return Object.defineProperty(t,"styleNode",{value:n,writable:!0}),{add:function(e){i+=e},inject:function(){i&&(r?r.cssText+=i:n.innerHTML+=i,i="")}}}(n),y=function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame;if(!t||/iP(ad|hone|od).*OS 6/.test(e.navigator.userAgent)){var n=0;t=function(e){var t=Date.now(),r=Math.max(16-(t-n),0);setTimeout(function(){e(n=t+r)},r)}}return t}(e||{});n.util={brackets:v,tmpl:b},n.mixin=function(){var e={};return function(t,n){return isObject(t)?(n=t,void(e[a]=extend(e[a]||{},n))):n?void(e[t]=n):e[t]}}(),n.tag=function(e,t,n,r,i){return isFunction(r)&&(i=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(isFunction(n)?i=n:x.add(n)),e=e.toLowerCase(),o[e]={name:e,tmpl:t,attrs:r,fn:i},e},n.tag2=function(e,t,n,r,i){return n&&x.add(n),o[e]={name:e,tmpl:t,attrs:r,fn:i},e},n.mount=function(e,t,n){function addRiotTags(e){var t="";return each(e,function(e){/[^-\w]/.test(e)||(e=e.trim().toLowerCase(),t+=",["+c+'="'+e+'"],['+u+'="'+e+'"]')}),t}function selectAllTags(){var e=Object.keys(o);return e+addRiotTags(e)}function pushTags(e){if(e.tagName){var r=getAttr(e,c)||getAttr(e,u);t&&r!==t&&(r=t,setAttr(e,c,t));var i=mountTo(e,r||e.tagName.toLowerCase(),n);i&&a.push(i)}else e.length&&each(e,pushTags)}var r,i,a=[];if(x.inject(),isObject(t)&&(n=t,t=0),typeof e===l?("*"===e?e=i=selectAllTags():e+=addRiotTags(e.split(/, */)),r=e?$$(e):[]):r=e,"*"===t){if(t=i||selectAllTags(),r.tagName)r=$$(t,r);else{var s=[];each(r,function(e){s.push($$(t,e))}),r=s}t=0}return pushTags(r),a},n.update=function(){return each(i,function(e){e.update()})},n.Tag=Tag;var w=function(){function _req(t){var n=e[t];if(n)return n;throw new Error(t+" parser not found.")}function extend(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var t={html:{jade:function(e,t,n){return t=extend({pretty:!0,filename:n,doctype:"html"},t),_req("jade").render(e,t)}},css:{less:function(e,t,n,r){var i;return n=extend({sync:!0,syncImport:!0,filename:r},n),_req("less").render(t,n,function(e,t){if(e)throw e;i=t.css}),i}},js:{es6:function(e,t){return t=extend({blacklist:["useStrict","strict","react"],sourceMaps:!1,comments:!1},t),_req("babel").transform(e,t).code},babel:function(e,t,n){return _req("babel").transform(e,extend({filename:n},t)).code},coffee:function(e,t){return _req("CoffeeScript").compile(e,extend({bare:!0},t))},livescript:function(e,t){return _req("livescript").compile(e,extend({bare:!0,header:!1},t))},typescript:function(e,t){return _req("typescript")(e,t)},none:function(e){return e}}};return t.js.javascript=t.js.none,t.js.coffeescript=t.js.coffee,t}();n.parsers=w;var S=function(){function cleanSource(e){var t,n=i;for(~e.indexOf("\r")&&(e=e.replace(/\r\n?/g,"\n")),n.lastIndex=0;t=n.exec(e);)"<"===t[0][0]&&(e=RegExp.leftContext+RegExp.rightContext,n.lastIndex=t[3]+1);return e}function parseAttribs(e,t){var n,i,o,u=[];for(r.lastIndex=0,e=e.replace(/\s+/g," ");n=r.exec(e);){var c=n[1].toLowerCase(),p=n[2];p?(p[0]!==f&&(p=f+(p[0]===d?p.slice(1,-1):p)+f),"type"===c&&l.test(p)?i=p:(/\u0001\d/.test(p)&&("value"===c?o=1:a.test(c)?c="__"+c:~s.indexOf(c)&&(c="riot-"+c)),u.push(c+"="+p))):u.push(c)}return i&&(o&&(i=f+t._bp[0]+d+i.slice(1,-1)+d+t._bp[1]+f),u.push("type="+i)),u.join(" ")}function splitHtml(e,t,n){var r=n._bp;if(e&&r[4].test(e)){for(var i,o,a=t.expr&&(t.parser||t.type)?_compileJS:0,s=v.split(e,0,r),u=1;u<s.length;u+=2)i=s[u],"^"===i[0]?i=i.slice(1):a&&(o="="===i[0],i=a(o?i.slice(1):i,t).trim(),";"===i.slice(-1)&&(i=i.slice(0,-1)),o&&(i="="+i)),s[u]=""+(n.push(i)-1)+r[1];e=s.join("")}return e}function restoreExpr(e,t){return t.length&&(e=e.replace(/\u0001(\d+)/g,function(e,n){var r=t[n];return"="===r[0]&&(r=r.replace(v.R_STRINGS,function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")})),t._bp[0]+r.trim().replace(/[\r\n]+/g," ").replace(/"/g,"⁗")})),e}function _compileHTML(e,t,n){if(e=splitHtml(e,t,n).replace(o,function(e,t,r,i){return t=t.toLowerCase(),i=i&&!u.test(t)?"></"+t:"",r&&(t+=" "+parseAttribs(r,n)),"<"+t+i+">"}),!t.whitespace){var r=[];/<pre[\s>]/.test(e)&&(e=e.replace(c,function(e){return r.push(e),""})),e=e.trim().replace(/\s+/g," "),r.length&&(e=e.replace(/\u0002/g,function(){return r.shift()}))}return t.compact&&(e=e.replace(/>[ \t]+<([-\w\/])/g,"><$1")),restoreExpr(e,n).replace(p,"")}function compileHTML(e,t,n){return Array.isArray(t)?(n=t,t={}):(n||(n=[]),t||(t={})),n._bp=v.array(t.brackets),_compileHTML(cleanSource(e),t,n)}function riotjs(e){function rmComms(e,t,n){for(t.lastIndex=0;n=t.exec(e);)"/"!==n[0][0]||n[1]||n[2]||(e=a.leftContext+" "+a.rightContext,t.lastIndex=n[3]+1);return e}function skipBody(e,t){var n,r=1;for(t.lastIndex=0;r&&(n=t.exec(e));)"{"===n[0]?++r:"}"===n[0]&&--r;return r?e.length:t.lastIndex}var t,n,r,i,o=[],a=RegExp;for(~e.indexOf("/")&&(e=rmComms(e,h));t=e.match(g);)o.push(a.leftContext),e=a.rightContext,r=skipBody(e,m),i=t[1],n=!/^(?:if|while|for|switch|catch|function)$/.test(i),i=n?t[0].replace(i,"this."+i+" = function"):t[0],o.push(i,e.slice(0,r)),e=e.slice(r),n&&!/^\s*.\s*bind\b/.test(e)&&o.push(".bind(this)");return o.length?o.join("")+e:e}function _compileJS(e,t,n,r,i){if(!/\S/.test(e))return"";n||(n=t.type);var o=t.parser||(n?w.js[n]:riotjs);if(!o)throw new Error('JS parser not found: "'+n+'"');return o(e,r,i).replace(/\r\n?/g,"\n").replace(p,"")}function compileJS(e,t,n,r){return"string"==typeof t&&(r=n,n=t,t={}),n&&"object"==typeof n&&(r=n,n=""),r||(r={}),_compileJS(e,t||{},n,r.parserOptions,r.url)}function scopedCSS(e,t){var n=":scope";return t.replace(b,function(t,r,i){return i?(i=i.replace(/[^,]+/g,function(t){var r=t.trim();return r&&"from"!==r&&"to"!==r&&"%"!==r.slice(-1)?(r=r.indexOf(n)<0?e+" "+r+',[riot-tag="'+e+'"] '+r:r.replace(n,e)+","+r.replace(n,'[riot-tag="'+e+'"]')," "===t.slice(-1)?r+" ":r):t}),r?r+" "+i:i):t})}function _compileCSS(e,t,n,r){var i=(r||(r={})).scoped;if(n)if("scoped-css"===n)i=!0;else if(w.css[n])e=w.css[n](t,e,r.parserOpts||{},r.url);else if("css"!==n)throw new Error('CSS parser not found: "'+n+'"');if(e=e.replace(v.R_MLCOMMS,"").replace(/\s+/g," ").trim(),i){if(!t)throw new Error("Can not parse scoped CSS without a tagName");e=scopedCSS(t,e)}return e}function compileCSS(e,t,n){return t&&"object"==typeof t?(n=t,t=""):n||(n={}),_compileCSS(e,n.tagName,t,n)}function _q(e,t){return e?(e=d+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+d,t&&~e.indexOf("\n")?e.replace(/\n/g,"\\n"):e):"''"}function mktag(e,t,n,r,i,o){var a=", ",s="}"+(o.length?", "+_q(o._bp[8]):"")+");";return i&&"\n"!==i.slice(-1)&&(s="\n"+s),"riot.tag2('"+e+d+a+_q(t,1)+a+_q(n)+a+_q(r)+", function(opts) {\n"+i+s}function splitBlocks(e){if(/<[-\w]/.test(e))for(var t,n=e.lastIndexOf("<"),r=e.length;~n;){if(t=e.slice(n,r).match(y))return n+=t.index+t[0].length,[e.slice(0,n),e.slice(n)];r=n,n=e.lastIndexOf("<",n-1)}return["",e]}function getType(e){if(e){var t=e.match(_);if(t=t&&(t[2]||t[3]))return t.replace("text/","")}return""}function getAttrib(e,t){if(e){var n=e.match(RegExp("\\s"+t+x,"i"));if(n=n&&n[1])return/^['"]/.test(n)?n.slice(1,-1):n}return""}function getParserOptions(e){var t=getAttrib(e,"options");return t?JSON.parse(t):null}function getCode(e,t,n,r){var i=getType(n);return _compileJS(e,t,i,getParserOptions(n),r)}function cssCode(e,t,n,r,i){var o={parserOpts:getParserOptions(n),scoped:n&&/\sscoped(\s|=|$)/i.test(n),url:r};return _compileCSS(e,i,getType(n)||t.style,o)}function compileTemplate(e,t,n,r){var i=w.html[n];if(!i)throw new Error('Template parser not found: "'+n+'"');return i(e,r,t)}function compile(e,t,n){var r,i=[];t||(t={}),r=t.exclude?function(e){return t.exclude.indexOf(e)<0}:function(){return 1},n||(n="");var o=v.array(t.brackets);return t.template&&(e=compileTemplate(e,n,t.template,t.templateOptions)),e=cleanSource(e).replace(S,function(e,a,s,u,c,l){var f="",d="",g="",m=[];if(m._bp=o,s=s.toLowerCase(),u=u&&r("attribs")?restoreExpr(parseAttribs(splitHtml(u,t,m),m),m):"",(c||(c=l))&&/\S/.test(c))if(l)r("html")&&(g=_compileHTML(l,t,m));else{c=c.replace(RegExp("^"+a,"gm"),""),c=c.replace(E,function(e,i,o){return r("css")&&(d+=(d?" ":"")+cssCode(o,t,i,n,s)),""}),c=c.replace(T,function(e,i,o){if(r("js")){var a=getCode(o,t,i,n);a&&(f+=(f?"\n":"")+a)}return""});var h=splitBlocks(c.replace(p,""));r("html")&&(g=_compileHTML(h[0],t,m)),r("js")&&(c=_compileJS(h[1],t,null,null,n),c&&(f+=(f?"\n":"")+c))}return f=/\S/.test(f)?f.replace(/\n{3,}/g,"\n\n"):"",t.entities?(i.push({tagName:s,html:g,css:d,attribs:u,js:f}),""):mktag(s,g,d,u,f,m)}),t.entities?i:e}var e=/"[^"\n\\]*(?:\\[\S\s][^"\n\\]*)*"|'[^'\n\\]*(?:\\[\S\s][^'\n\\]*)*'/.source,t=v.R_STRINGS.source,r=/ *([-\w:\xA0-\xFF]+) ?(?:= ?('[^']*'|"[^"]*"|\S+))?/g,i=RegExp(/<!--(?!>)[\S\s]*?-->/.source+"|"+e,"g"),o=/<([-\w]+)(?:\s+([^"'\/>]*(?:(?:"[^"]*"|'[^']*'|\/[^>])[^'"\/>]*)*)|\s*)(\/?)>/g,a=RegExp("^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$"),s=["style","src","d"],u=/^(?:input|img|br|wbr|hr|area|base|col|embed|keygen|link|meta|param|source|track)$/,c=/<pre(?:\s+(?:[^">]*|"[^"]*")*)?>([\S\s]+?)<\/pre\s*>/gi,l=/^"(?:number|date(?:time)?|time|month|email|color)\b/i,p=/[ \t]+$/gm,f='"',d="'",g=/^[ \t]*([$_A-Za-z][$\w]*)\s*\([^()]*\)\s*{/m,m=RegExp("[{}]|"+v.S_QBLOCKS,"g"),h=RegExp(v.R_MLCOMMS.source+"|//[^\r\n]*|"+v.S_QBLOCKS,"g"),b=RegExp("([{}]|^)[ ;]*([^@ ;{}][^{}]*)(?={)|"+e,"g"),_=/\stype\s*=\s*(?:(['"])(.+?)\1|(\S+))/i,x="\\s*=\\s*("+t+"|{[^}]+}|\\S+)",y=/\/>\n|^<(?:\/?[-\w]+\s*|[-\w]+\s+[-\w:\xA0-\xFF][\S\s]*?)>\n/,S=RegExp(/^([ \t]*)<([-\w]+)(?:\s+([^'"\/>]+(?:(?:@|\/[^>])[^'"\/>]*)*)|\s*)?(?:\/>|>[ \t]*\n?([\S\s]*)^\1<\/\2\s*>|>(.*)<\/\2\s*>)/.source.replace("@",t),"gim"),T=/<script(\s+[^>]*)?>\n?([\S\s]*?)<\/script\s*>/gi,E=/<style(\s+[^>]*)?>\n?([\S\s]*?)<\/style\s*>/gi;return n.util.compiler={compile:compile,html:compileHTML,css:compileCSS,js:compileJS,version:"v2.3.22"},compile}();n.compile=function(){function GET(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status||!r.status&&r.responseText.length)&&t(r.responseText,n,e)},r.open("GET",e,!0),r.send("")}function globalEval(e,t){if(typeof e===l){var n=mkEl("script"),r=document.documentElement;t&&(e+="\n//# sourceURL="+t+".js"),n.text=e,r.appendChild(n),r.removeChild(n)}}function compileScripts(t,n){function done(){e.trigger("ready"),r=!0,t&&t()}function compileTag(e,t,n){var r=S(e,t,n);globalEval(r,n),--o||done()}var i=$$('script[type="riot/tag"]'),o=i.length;if(o)for(var a=0;a<i.length;++a){var s=i[a],u=extend({template:getAttr(s,"template")},n),c=getAttr(s,"src");c?GET(c,compileTag,u):compileTag(s.innerHTML,u)}else done()}var e,r;return function(i,o,a){if(typeof i===l){if(isObject(o)&&(a=o,o=!1),/^\s*</m.test(i)){var s=S(i,a);return o!==!0&&globalEval(s),isFunction(o)&&o(s,i,a),s}GET(i,function(e,t,n){var r=S(e,t,n);globalEval(r,n),o&&o(r,e,t)})}else{if(isFunction(i)?(a=o,o=i):(a=i,o=t),r)return o&&o();e?o&&e.on("ready",o):(e=n.observable(),compileScripts(o,a))}}}();var T=n.mount;n.mount=function(e,t,r){var i;return n.compile(function(){i=T(e,t,r)}),i},typeof exports===p?module.exports=n:typeof define===d&&typeof define.amd!==f?define(function(){return n}):e.riot=n}("undefined"!=typeof window?window:void 0);